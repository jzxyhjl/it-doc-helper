# IT学习辅助系统 - 实施计划

## 项目概述

基于需求文档和技术方案，将项目拆分为可执行的任务单元，按照开发顺序组织，确保MVP功能完整实现。

## 任务列表

### 阶段一：项目基础搭建

#### 任务1: 项目结构初始化
- 创建项目目录结构
  - `backend/` - 后端代码目录
  - `frontend/` - 前端代码目录
  - `uploads/` - 文件上传存储目录
  - `.trae/documents/` - 文档目录（已存在）
  - `docker-compose.yml` - Docker编排文件
  - `.env.example` - 环境变量示例
  - `README.md` - 项目说明文档
- 创建 `.gitignore` 文件
- 初始化 Git 仓库（可选）

**相关需求**: REQ-13

---

#### 任务2: 后端项目初始化
- 创建 `backend/` 目录结构
  - `app/` - 应用主目录
  - `app/api/` - API路由
  - `app/models/` - 数据模型
  - `app/services/` - 业务逻辑
  - `app/utils/` - 工具函数
  - `app/core/` - 核心配置
  - `requirements.txt` - Python依赖
  - `Dockerfile` - Docker镜像配置
- 初始化 Python 虚拟环境
- 安装基础依赖（FastAPI、SQLAlchemy、Pydantic等）
- 创建 FastAPI 应用入口文件
- 配置基础日志系统

**相关需求**: REQ-11, REQ-13

---

#### 任务3: 前端项目初始化
- 使用 Vite 创建 React + TypeScript 项目
- 安装基础依赖
  - React 18+
  - TailwindCSS
  - shadcn/ui（可选）
  - Axios
  - React Query / Zustand
- 配置 TailwindCSS
- 创建基础目录结构
  - `src/components/` - 组件目录
  - `src/pages/` - 页面目录
  - `src/api/` - API调用
  - `src/hooks/` - 自定义Hooks
  - `src/utils/` - 工具函数
- 创建基础布局组件
- 配置路由（如需要）

**相关需求**: REQ-11

---

#### 任务4: Docker环境配置
- 创建 `backend/Dockerfile`
  - 基于 Python 3.11
  - 安装依赖
  - 配置工作目录
- 创建 `frontend/Dockerfile`
  - 多阶段构建（构建 + Nginx服务）
- 创建 `docker-compose.yml`
  - PostgreSQL服务配置
  - Redis服务配置
  - 后端服务配置
  - Celery Worker配置
  - 前端服务配置
  - 网络配置
  - 数据卷配置
- 创建 `.env.example` 文件
- 编写 Docker 启动说明文档

**相关需求**: REQ-13

---

### 阶段二：数据库设计与实现

#### 任务5: 数据库模型设计
- 创建 SQLAlchemy 模型文件
  - `app/models/document.py` - 文档模型
  - `app/models/document_type.py` - 文档类型模型
  - `app/models/processing_result.py` - 处理结果模型
  - `app/models/processing_task.py` - 处理任务模型
  - `app/models/system_learning_data.py` - 系统学习数据模型
- 定义所有字段、关系、索引
- 创建数据库迁移配置（Alembic）
- 编写数据库初始化脚本

**相关需求**: REQ-9, REQ-10

---

#### 任务6: 数据库迁移与初始化
- 配置 Alembic
- 创建初始迁移文件
- 编写数据库初始化脚本
- 测试数据库连接
- 验证表结构创建

**相关需求**: REQ-9, REQ-10

---

### 阶段三：文档处理核心功能

#### 任务7: 文档上传功能实现
- 实现文件上传API端点
  - `POST /api/v1/documents/upload`
- 文件验证逻辑
  - 文件大小检查（30MB限制）
  - 文件类型检查（白名单：pdf/docx/pptx/md/txt）
  - 文件名安全处理
- 文件存储逻辑
  - 生成唯一文件名
  - 保存到 uploads 目录
- 数据库记录创建
  - 保存文档元数据到 documents 表
- 错误处理
  - 文件过大错误
  - 文件类型不支持错误
- 编写单元测试

**相关需求**: REQ-1, REQ-12

---

#### 任务8: 文档内容提取服务
- 创建文档处理服务
  - `app/services/document_extractor.py`
- 实现PDF内容提取
  - 使用 pdfplumber 提取文本
  - 处理多页文档
- 实现Word内容提取
  - 使用 python-docx 提取文本
  - 提取标题、段落、列表
- 实现PPT内容提取
  - 使用 python-pptx 提取幻灯片内容
  - 提取每页标题和正文
- 实现Markdown内容提取
  - 使用 markdown 库解析
- 实现TXT内容提取
  - 读取纯文本文件
  - 字符编码检测（chardet）
- 统一提取接口
- 错误处理和日志记录
- 编写单元测试

**相关需求**: REQ-2

---

#### 任务9: 文档类型识别服务
- 创建文档类型识别服务
  - `app/services/document_classifier.py`
- 实现规则匹配
  - 关键词匹配规则
  - 文档结构分析
- 实现AI识别
  - 集成 DeepSeek API
  - 构建类型识别Prompt
  - 解析AI返回结果
- 实现混合识别策略
  - 规则优先，AI补充
- 保存识别结果到数据库
- 编写单元测试

**相关需求**: REQ-3

---

### 阶段四：AI处理功能实现

#### 任务10: DeepSeek API集成
- 创建AI服务模块
  - `app/services/ai_service.py`
- 配置DeepSeek API客户端
  - 使用 openai SDK（兼容格式）
  - API密钥管理（环境变量）
  - 请求重试机制
- 实现通用AI调用方法
- 错误处理和日志记录
- 编写单元测试

**相关需求**: REQ-4, REQ-5, REQ-6

---

#### 任务11: 面试题文档处理实现
- 创建面试题处理服务
  - `app/services/interview_processor.py`
- 实现内容总结功能
  - 提取关键知识点
  - 统计题型分布
  - 分析难度分布
  - 统计题目数量
- 实现问题生成功能
  - 构建问题生成Prompt
  - 调用DeepSeek API生成问题
  - 解析返回结果
- 实现答案提取功能
  - 识别文档中的答案部分
  - 整理答案内容
- 格式化处理结果
- 保存结果到数据库
- 编写单元测试

**相关需求**: REQ-4

---

#### 任务12: IT技术文档处理实现
- 创建技术文档处理服务
  - `app/services/technical_processor.py`
- 实现前置条件分析
  - 识别必须掌握的基础知识
  - 识别推荐掌握的基础知识
- 实现学习路径规划
  - 分阶段学习建议（至少3个阶段）
  - 从架构师/讲师角度提供建议
- 实现学习方法建议
  - 理论学习建议
  - 实践建议
- 实现技术关联分析
  - 识别相关技术
- 格式化处理结果
- 保存结果到数据库
- 编写单元测试

**相关需求**: REQ-5

---

#### 任务13: 架构文档处理实现
- 创建架构文档处理服务
  - `app/services/architecture_processor.py`
- 实现配置流程提取
  - 识别配置步骤
  - 步骤化整理
- 实现组件识别
  - 识别文档中的组件
  - 分析组件关系
- 实现全景视图生成
  - 生成组件关系描述
  - 生成Mermaid图表代码（可选）
- 实现白话串讲
  - 使用通俗易懂的语言解释技术
  - 调用DeepSeek API生成白话解释
- 实现配置检查清单生成
  - 生成验证步骤
- 格式化处理结果
- 保存结果到数据库
- 编写单元测试

**相关需求**: REQ-6

---

### 阶段五：任务队列与异步处理

#### 任务14: Celery任务队列配置
- 安装和配置Celery
  - `app/core/celery_app.py`
- 配置Redis作为消息代理
- 创建任务定义
  - 文档处理任务
  - 进度更新任务
- 配置任务路由
- 测试任务队列连接

**相关需求**: REQ-2, REQ-3, REQ-4, REQ-5, REQ-6

---

#### 任务15: 异步文档处理任务实现
- 创建文档处理任务
  - `app/tasks/document_processing.py`
- 实现任务流程
  1. 内容提取（更新进度20%）
  2. 类型识别（更新进度40%）
  3. 根据类型处理（更新进度60-80%）
  4. 保存结果（更新进度100%）
- 集成所有处理服务
- 进度更新机制
  - 更新 processing_tasks 表
  - 发送进度通知（Redis发布）
- 错误处理和重试机制
- 编写单元测试

**相关需求**: REQ-2, REQ-3, REQ-4, REQ-5, REQ-6, REQ-7

---

### 阶段六：API接口实现

#### 任务16: 文档管理API实现
- 实现文档上传API
  - `POST /api/v1/documents/upload`
- 实现获取文档信息API
  - `GET /api/v1/documents/{document_id}`
- 实现获取处理进度API
  - `GET /api/v1/documents/{document_id}/progress`
- 实现获取处理结果API
  - `GET /api/v1/documents/{document_id}/result`
- 实现删除文档API
  - `DELETE /api/v1/documents/{document_id}`
- 实现请求验证（Pydantic）
- 实现错误处理
- 编写API测试

**相关需求**: REQ-1, REQ-7, REQ-8, REQ-9, REQ-12

---

#### 任务17: 历史记录API实现
- 实现获取历史记录列表API
  - `GET /api/v1/documents/history`
- 实现分页功能
- 实现筛选功能
  - 按文档类型筛选
  - 按时间范围筛选
- 实现排序功能
- 编写API测试

**相关需求**: REQ-9

---

#### 任务18: WebSocket实时进度实现
- 实现WebSocket端点
  - `WS /ws/progress/{task_id}`
- 实现进度推送机制
  - 订阅Redis进度更新
  - 向客户端推送进度消息
- 实现连接管理
  - 连接建立
  - 连接断开
  - 心跳检测
- 实现消息格式
  - 进度更新消息
  - 完成消息
  - 错误消息
- 编写WebSocket测试

**相关需求**: REQ-7

---

### 阶段七：前端界面实现

#### 任务19: 前端基础组件开发
- 创建布局组件
  - Header、Sidebar、Main Content
- 创建UI组件（使用TailwindCSS）
  - Button、Input、Card、Modal等
- 创建文件上传组件
  - 拖拽上传
  - 文件选择
  - 上传进度显示
- 创建加载组件
  - Loading Spinner
  - Progress Bar
- 创建错误提示组件
- 配置轻松风格主题

**相关需求**: REQ-11

---

#### 任务20: 文档上传页面实现
- 创建上传页面组件
- 实现文件选择功能
- 实现文件上传功能
  - 调用上传API
  - 显示上传进度
- 实现文件验证提示
- 实现上传成功/失败反馈
- 实现轻松风格UI设计

**相关需求**: REQ-1, REQ-11, REQ-12

---

#### 任务21: 处理进度页面实现
- 创建进度展示组件
- 实现WebSocket连接
- 实现实时进度显示
  - 进度条
  - 百分比显示
  - 当前阶段显示
- 实现处理完成跳转
- 实现错误提示显示
- 实现轻松风格UI设计

**相关需求**: REQ-7, REQ-11

---

#### 任务22: 处理结果展示页面实现
- 创建结果展示组件
- 实现面试题结果展示
  - 内容总结展示
  - 生成问题展示
  - 答案整理展示
- 实现技术文档结果展示
  - 前置知识清单
  - 学习路径展示
  - 学习方法建议
- 实现架构文档结果展示
  - 配置流程展示
  - 组件全景视图（支持Mermaid渲染）
  - 白话串讲展示
  - 配置检查清单
- 实现结果展开/折叠功能
- 实现结果复制功能
- 实现轻松风格UI设计

**相关需求**: REQ-8, REQ-11

---

#### 任务23: 历史记录页面实现
- 创建历史记录列表组件
- 实现历史记录列表展示
  - 文档信息
  - 处理状态
  - 处理时间
- 实现筛选功能
  - 按文档类型筛选
  - 按时间范围筛选
- 实现分页功能
- 实现查看详情功能
- 实现删除功能
- 实现轻松风格UI设计

**相关需求**: REQ-9, REQ-11

---

#### 任务24: 前端API集成
- 创建API客户端
  - `src/api/client.ts`
- 实现所有API调用方法
  - 文档上传
  - 获取文档信息
  - 获取处理进度
  - 获取处理结果
  - 获取历史记录
  - 删除文档
- 实现错误处理
- 实现请求拦截器
- 配置React Query（数据缓存）

**相关需求**: REQ-1, REQ-7, REQ-8, REQ-9

---

#### 任务25: 前端路由和状态管理
- 配置路由
  - 上传页面
  - 进度页面
  - 结果页面
  - 历史记录页面
- 实现状态管理（Zustand）
  - 文档状态
  - UI状态
- 实现页面导航
- 实现404页面

**相关需求**: REQ-11

---

### 阶段八：系统学习功能（基础版）

#### 任务26: 系统学习数据收集实现
- 创建数据收集服务
  - `app/services/learning_data_collector.py`
- 实现数据收集逻辑
  - 文档内容摘要生成
  - 处理结果摘要生成
  - 处理耗时统计
- 保存数据到 system_learning_data 表
- 实现数据格式统一
- 编写单元测试

**相关需求**: REQ-10

---

### 阶段九：测试与优化

#### 任务27: 后端集成测试
- 编写API集成测试
- 编写文档处理流程测试
- 编写任务队列测试
- 编写WebSocket测试
- 测试错误处理场景
- 性能测试（处理时间）

**相关需求**: 所有需求

---

#### 任务28: 前端测试
- 编写组件单元测试
- 编写页面集成测试
- 编写API调用测试
- 测试用户交互流程
- 测试错误处理

**相关需求**: REQ-11

---

#### 任务29: 端到端测试
- 测试完整文档处理流程
  - 上传 → 处理 → 结果展示
- 测试不同文档类型处理
- 测试历史记录功能
- 测试错误场景
- 测试并发处理

**相关需求**: 所有需求

---

#### 任务30: 性能优化
- 优化文档处理性能
- 优化数据库查询
- 优化前端加载速度
- 实现缓存策略
- 优化大文件处理

**相关需求**: NFR-1

---

### 阶段十：部署与文档

#### 任务31: Docker配置优化
- 优化Dockerfile（多阶段构建）
- 优化docker-compose配置
- 配置健康检查
- 配置资源限制
- 测试容器启动

**相关需求**: REQ-13

---

#### 任务32: 环境配置文档
- 编写环境变量说明
- 编写部署文档
- 编写启动说明
- 编写故障排查指南

**相关需求**: REQ-13

---

#### 任务33: 用户文档编写
- 编写用户使用手册
- 编写API文档（FastAPI自动生成）
- 编写常见问题FAQ
- 创建项目README

**相关需求**: 所有需求

---

## 任务优先级

### P0（核心功能，必须完成）
- 任务1-4: 项目基础搭建
- 任务5-6: 数据库设计与实现
- 任务7-9: 文档处理核心功能
- 任务10-13: AI处理功能实现
- 任务14-15: 任务队列与异步处理
- 任务16-18: API接口实现
- 任务19-25: 前端界面实现

### P1（重要功能，建议完成）
- 任务26: 系统学习数据收集
- 任务27-29: 测试
- 任务30: 性能优化

### P2（辅助功能，可选）
- 任务31-33: 部署优化与文档

---

## 开发顺序建议

1. **第一阶段**（基础搭建）：任务1-6
2. **第二阶段**（核心功能）：任务7-15
3. **第三阶段**（API和前端）：任务16-25
4. **第四阶段**（完善功能）：任务26-30
5. **第五阶段**（部署上线）：任务31-33

---

## 预估工作量

| 阶段 | 任务数 | 预估时间 |
|------|--------|----------|
| 基础搭建 | 6 | 2-3天 |
| 核心功能 | 9 | 5-7天 |
| API和前端 | 10 | 6-8天 |
| 完善功能 | 5 | 3-4天 |
| 部署上线 | 3 | 1-2天 |
| **总计** | **33** | **17-24天** |

*注：预估时间为单人开发时间，实际时间可能因经验和技术栈熟悉程度而有所不同。*

---

## 风险与注意事项

1. **DeepSeek API稳定性**：需要实现重试机制和错误处理
2. **大文件处理性能**：30MB文件处理可能需要优化
3. **PPT处理复杂性**：PPT格式复杂，需要充分测试
4. **WebSocket连接管理**：需要处理断线重连
5. **数据库性能**：大量历史记录可能影响查询性能，需要索引优化

---

**文档版本**：v1.0  
**创建时间**：2025-12-09  
**最后更新**：2025-12-09

